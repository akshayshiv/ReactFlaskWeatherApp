{"ast":null,"code":"import _regeneratorRuntime from\"/Users/akshay/Downloads/weather_forecast_app-main/weather_api_service/weather_api_service/frontend/my-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/akshay/Downloads/weather_forecast_app-main/weather_api_service/weather_api_service/frontend/my-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/akshay/Downloads/weather_forecast_app-main/weather_api_service/weather_api_service/frontend/my-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./App.css';import data from\"./data/country_data.json\";import Select from'react-select';import{Forecast}from'./components/forecast';import{useState}from'react';import{MultiDayWeatherForecast}from'./components/weatherTable';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),select=_useState2[0],setSelect=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),weatherData=_useState4[0],setWeatherData=_useState4[1];var _useState5=useState(5),_useState6=_slicedToArray(_useState5,2),numberDays=_useState6[0],setNumberDays=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),city=_useState8[0],setCity=_useState8[1];var handleChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(selectedOptions){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:console.log(numberDays,\"here\");setCity(selectedOptions);_context.next=4;return fetch(\"http://127.0.0.1:5900/forecast/\".concat(selectedOptions.name,\"/\").concat(numberDays),{method:\"get\"}).then(function(res){return res.json();}).then(function(data){console.log(data);setSelect(true);setWeatherData(data);});case 4:case\"end\":return _context.stop();}},_callee);}));return function handleChange(_x){return _ref.apply(this,arguments);};}();var editBoth=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(options){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:setNumberDays(options.value);if(!(city.error==1006)){_context2.next=4;break;}_context2.next=4;return handleChange(city);case 4:case\"end\":return _context2.stop();}},_callee2);}));return function editBoth(_x2){return _ref2.apply(this,arguments);};}();var newData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"http://127.0.0.1:5900/countries/\".concat(city),{method:\"get\"}).then(function(res){return res.json;}).then(function(data){return console.log(data);});case 2:case\"end\":return _context3.stop();}},_callee3);}));return function newData(){return _ref3.apply(this,arguments);};}();var days=[{label:\"3\",value:3},{label:\"5\",value:5},{label:\"7\",value:7}];return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(Select,{options:data,getOptionLabel:function getOptionLabel(option){return option.name;},getOptionValue:function getOptionValue(option){return option.geonameid;}// It should be unique value in the options. E.g. ID\n,placeholder:'Enter a city to find it\\'s weather',onChange:handleChange}),/*#__PURE__*/_jsx(Select,{options:days,placeholder:'Number of days',onChange:editBoth}),select&&/*#__PURE__*/_jsx(Forecast,{forecast:weatherData}),select&&/*#__PURE__*/_jsx(MultiDayWeatherForecast,{forecast:weatherData.forecast})]})});}export default App;","map":{"version":3,"names":["data","Select","Forecast","useState","MultiDayWeatherForecast","App","select","setSelect","weatherData","setWeatherData","numberDays","setNumberDays","city","setCity","handleChange","selectedOptions","console","log","fetch","name","method","then","res","json","editBoth","options","value","error","newData","days","label","option","geonameid","forecast"],"sources":["/Users/akshay/Downloads/weather_forecast_app-main/weather_api_service/weather_api_service/frontend/my-react-app/src/App.js"],"sourcesContent":["import './App.css';\nimport data from \"./data/country_data.json\"\nimport Select from 'react-select';\nimport { Forecast } from './components/forecast';\nimport { useState } from 'react';\nimport { MultiDayWeatherForecast } from './components/weatherTable';\n\nfunction App() {\n  const [select, setSelect] = useState(false);\n  const [weatherData, setWeatherData] = useState({})\n  const [numberDays, setNumberDays] = useState(5)\n  const [city, setCity] = useState(\"\")\n\n\n  const handleChange =  async (selectedOptions) => {\n    console.log(numberDays, \"here\")\n    setCity(selectedOptions)\n    await fetch(`http://127.0.0.1:5900/forecast/${selectedOptions.name}/${numberDays}`, {\n        method: \"get\"\n    }).then(res => res.json())\n    .then((data) => {\n      console.log(data)\n      setSelect(true)\n      setWeatherData(data)\n    });\n  }\n\n\n  const editBoth = async (options) => {\n    setNumberDays(options.value)\n    if(city.error == 1006){ // checks to see if the city hasn't been set yet\n      await handleChange(city)\n    }\n    \n  }\n  const newData = async () => {\n    await fetch(`http://127.0.0.1:5900/countries/${city}`, {\n      method: \"get\"\n    }).then(res => res.json)\n    .then(data => console.log(data))\n  }\n\n  const days = [\n    {label: \"3\", value: 3},\n    {label: \"5\", value: 5},\n    {label: \"7\", value: 7},\n  ]\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n      <Select\n        options={data}\n        getOptionLabel={(option) => option.name}\n        getOptionValue={(option) => option.geonameid} // It should be unique value in the options. E.g. ID\n        placeholder = {'Enter a city to find it\\'s weather'}\n        onChange={handleChange}\n      />\n\n      <Select\n        options={days}\n        placeholder = {'Number of days'}\n        onChange={editBoth}\n      />\n\n      {select && <Forecast forecast={weatherData}/>}\n      {select && <MultiDayWeatherForecast forecast = {weatherData.forecast} />}\n      </header>\n\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"+lBAAA,MAAO,WAAW,CAClB,MAAOA,KAAI,KAAM,0BAA0B,CAC3C,MAAOC,OAAM,KAAM,cAAc,CACjC,OAASC,QAAQ,KAAQ,uBAAuB,CAChD,OAASC,QAAQ,KAAQ,OAAO,CAChC,OAASC,uBAAuB,KAAQ,2BAA2B,CAAC,wFAEpE,QAASC,IAAG,EAAG,CACb,cAA4BF,QAAQ,CAAC,KAAK,CAAC,wCAApCG,MAAM,eAAEC,SAAS,eACxB,eAAsCJ,QAAQ,CAAC,CAAC,CAAC,CAAC,yCAA3CK,WAAW,eAAEC,cAAc,eAClC,eAAoCN,QAAQ,CAAC,CAAC,CAAC,yCAAxCO,UAAU,eAAEC,aAAa,eAChC,eAAwBR,QAAQ,CAAC,EAAE,CAAC,yCAA7BS,IAAI,eAAEC,OAAO,eAGpB,GAAMC,aAAY,4FAAI,iBAAOC,eAAe,mHAC1CC,OAAO,CAACC,GAAG,CAACP,UAAU,CAAE,MAAM,CAAC,CAC/BG,OAAO,CAACE,eAAe,CAAC,uBAClBG,MAAK,0CAAmCH,eAAe,CAACI,IAAI,aAAIT,UAAU,EAAI,CAChFU,MAAM,CAAE,KACZ,CAAC,CAAC,CAACC,IAAI,CAAC,SAAAC,GAAG,QAAIA,IAAG,CAACC,IAAI,EAAE,GAAC,CACzBF,IAAI,CAAC,SAACrB,IAAI,CAAK,CACdgB,OAAO,CAACC,GAAG,CAACjB,IAAI,CAAC,CACjBO,SAAS,CAAC,IAAI,CAAC,CACfE,cAAc,CAACT,IAAI,CAAC,CACtB,CAAC,CAAC,sDACH,kBAXKc,aAAY,4CAWjB,CAGD,GAAMU,SAAQ,6FAAG,kBAAOC,OAAO,uHAC7Bd,aAAa,CAACc,OAAO,CAACC,KAAK,CAAC,MACzBd,IAAI,CAACe,KAAK,EAAI,IAAI,kDACbb,aAAY,CAACF,IAAI,CAAC,wDAG3B,kBANKY,SAAQ,8CAMb,CACD,GAAMI,QAAO,6FAAG,gKACRV,MAAK,2CAAoCN,IAAI,EAAI,CACrDQ,MAAM,CAAE,KACV,CAAC,CAAC,CAACC,IAAI,CAAC,SAAAC,GAAG,QAAIA,IAAG,CAACC,IAAI,GAAC,CACvBF,IAAI,CAAC,SAAArB,IAAI,QAAIgB,QAAO,CAACC,GAAG,CAACjB,IAAI,CAAC,GAAC,wDACjC,kBALK4B,QAAO,2CAKZ,CAED,GAAMC,KAAI,CAAG,CACX,CAACC,KAAK,CAAE,GAAG,CAAEJ,KAAK,CAAE,CAAC,CAAC,CACtB,CAACI,KAAK,CAAE,GAAG,CAAEJ,KAAK,CAAE,CAAC,CAAC,CACtB,CAACI,KAAK,CAAE,GAAG,CAAEJ,KAAK,CAAE,CAAC,CAAC,CACvB,CAED,mBACE,YAAK,SAAS,CAAC,KAAK,uBAClB,gBAAQ,SAAS,CAAC,YAAY,wBAC9B,KAAC,MAAM,EACL,OAAO,CAAE1B,IAAK,CACd,cAAc,CAAE,wBAAC+B,MAAM,QAAKA,OAAM,CAACZ,IAAI,EAAC,CACxC,cAAc,CAAE,wBAACY,MAAM,QAAKA,OAAM,CAACC,SAAS,EAAE;AAAA,CAC9C,WAAW,CAAI,oCAAqC,CACpD,QAAQ,CAAElB,YAAa,EACvB,cAEF,KAAC,MAAM,EACL,OAAO,CAAEe,IAAK,CACd,WAAW,CAAI,gBAAiB,CAChC,QAAQ,CAAEL,QAAS,EACnB,CAEDlB,MAAM,eAAI,KAAC,QAAQ,EAAC,QAAQ,CAAEE,WAAY,EAAE,CAC5CF,MAAM,eAAI,KAAC,uBAAuB,EAAC,QAAQ,CAAIE,WAAW,CAACyB,QAAS,EAAG,GAC/D,EAEL,CAEV,CAEA,cAAe5B,IAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}