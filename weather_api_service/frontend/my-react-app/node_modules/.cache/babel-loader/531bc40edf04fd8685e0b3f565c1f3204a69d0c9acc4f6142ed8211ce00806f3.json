{"ast":null,"code":"import _regeneratorRuntime from\"/Users/akshay/Downloads/weather_forecast_app-main/weather_api_service/weather_api_service/frontend/my-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/akshay/Downloads/weather_forecast_app-main/weather_api_service/weather_api_service/frontend/my-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/akshay/Downloads/weather_forecast_app-main/weather_api_service/weather_api_service/frontend/my-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./App.css';import Select from'react-select';import{Forecast}from'./components/forecast';import{useState}from'react';import{MultiDayWeatherForecast}from'./components/weatherTable';import AsyncSelect from'react-select/async';import{Grid}from\"@mui/material\";import Login from'./components/Login';import{SunriseSunset}from'./components/dailySun';import Switch from'@mui/material/Switch';import FormControlLabel from'@mui/material/FormControlLabel';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var gridStyle={overflowX:\"auto\",overflowY:\"auto\"};function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),select=_useState2[0],setSelect=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),weatherData=_useState4[0],setWeatherData=_useState4[1];var _useState5=useState(5),_useState6=_slicedToArray(_useState5,2),numberDays=_useState6[0],setNumberDays=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),city=_useState8[0],setCity=_useState8[1];// Fetches the api with selected options of city and days\nvar handleChange=function handleChange(selectedOptions,numberDays){setCity(selectedOptions);fetch(\"http://127.0.0.1:5900/forecast/\".concat(selectedOptions.name+\", \"+selectedOptions.subcountry,\"/\").concat(numberDays),{method:\"get\"}).then(function(res){return res.json();}).then(function(data){setSelect(true);setWeatherData(data);setSelectedValue(selectedOptions.name);});};// Editing number of days involves requerying the weather\nvar editBoth=function editBoth(options){setNumberDays(options.value);if(city==\"\"){// checks to see if the city hasn't been set yet\nreturn;}handleChange(city,options.value);};// Searching through json was absurdly slow so it was converted to a table in the DB and this is querying that\nvar newData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(inputValue){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(inputValue==\"\")){_context.next=2;break;}return _context.abrupt(\"return\");case 2:return _context.abrupt(\"return\",fetch(\"http://127.0.0.1:5900/countries/\".concat(inputValue)).then(function(res){return res.json();}).then(function(data){return data['cities'];}));case 3:case\"end\":return _context.stop();}},_callee);}));return function newData(_x){return _ref.apply(this,arguments);};}();//dropdown for number of days\nvar days=[{label:\"3 days\",value:3},{label:\"5 days\",value:5},{label:\"7 days\",value:7}];//hooks and variables for the async dropdown component\nvar _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),inputValue=_useState10[0],setValue=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),selectedValue=_useState12[0],setSelectedValue=_useState12[1];var handleInputChange=function handleInputChange(value){setValue(value);};var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),token=_useState14[0],setToken=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),fahrenheit=_useState16[0],setFahrenheit=_useState16[1];var handleChangeFahrenheit=function handleChangeFahrenheit(event){fahrenheit=!fahrenheit;setFahrenheit(event.target.checked);};/* cookie to ensure inactivity, logs out at inactivity of an hour */var validated=Number(localStorage.getItem('items'));if(validated!=null&&Date.now()>=validated+3600000){validated=false;localStorage.removeItem('items');}if(!token&&!validated){return/*#__PURE__*/_jsx(Login,{setToken:setToken});}return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[select&&/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:fahrenheit,onChange:handleChangeFahrenheit}),label:\"F/C\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Welcome to Akshay Shivkumar's weather app!\",/*#__PURE__*/_jsxs(\"div\",{className:\"select\",children:[/*#__PURE__*/_jsx(AsyncSelect,{cacheOptions:true,defaultOptions:true,value:selectedValue,getOptionLabel:function getOptionLabel(option){return option.name+\", \"+option.subcountry;},getOptionValue:function getOptionValue(option){return option.geonameid;}// It should be unique value in the options. E.g. ID\n,placeholder:'Enter a city to find it\\'s weather',onChange:function onChange(city){return handleChange(city,numberDays);},onInputChange:handleInputChange,loadOptions:newData}),/*#__PURE__*/_jsx(Select,{options:days,placeholder:'Number of days of forecast',onChange:editBoth})]})]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,style:gridStyle,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:6,md:6,children:select&&/*#__PURE__*/_jsx(Forecast,{forecast:weatherData,fahrenheit:fahrenheit})}),/*#__PURE__*/_jsx(\"div\",{className:padding,children:select&&/*#__PURE__*/_jsx(SunriseSunset,{forecast:weatherData,fahrenheit:fahrenheit})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,md:4,children:select&&/*#__PURE__*/_jsx(MultiDayWeatherForecast,{forecast:weatherData.forecast,days:numberDays,fahrenheit:fahrenheit})})]})]})});}export default App;","map":{"version":3,"names":["Select","Forecast","useState","MultiDayWeatherForecast","AsyncSelect","Grid","Login","SunriseSunset","Switch","FormControlLabel","gridStyle","overflowX","overflowY","App","select","setSelect","weatherData","setWeatherData","numberDays","setNumberDays","city","setCity","handleChange","selectedOptions","fetch","name","subcountry","method","then","res","json","data","setSelectedValue","editBoth","options","value","newData","inputValue","days","label","setValue","selectedValue","handleInputChange","token","setToken","fahrenheit","setFahrenheit","handleChangeFahrenheit","event","target","checked","validated","Number","localStorage","getItem","Date","now","removeItem","option","geonameid","padding","forecast"],"sources":["/Users/akshay/Downloads/weather_forecast_app-main/weather_api_service/weather_api_service/frontend/my-react-app/src/App.js"],"sourcesContent":["import './App.css';\nimport Select from 'react-select';\nimport { Forecast } from './components/forecast';\nimport { useState } from 'react';\nimport { MultiDayWeatherForecast } from './components/weatherTable';\nimport AsyncSelect from 'react-select/async';\nimport { Grid } from \"@mui/material\";\nimport Login from './components/Login';\nimport { SunriseSunset } from './components/dailySun';\nimport Switch from '@mui/material/Switch';\nimport FormControlLabel from '@mui/material/FormControlLabel';\n\n\nconst gridStyle = {\n  overflowX: \"auto\", overflowY: \"auto\"\n}\n\n\n\nfunction App() {\n  const [select, setSelect] = useState(false);\n  const [weatherData, setWeatherData] = useState({})\n  const [numberDays, setNumberDays] = useState(5)\n  const [city, setCity] = useState(\"\")\n\n  // Fetches the api with selected options of city and days\n  const handleChange =   (selectedOptions, numberDays) => {\n    setCity(selectedOptions)\n     fetch(`http://127.0.0.1:5900/forecast/${selectedOptions.name + \", \" + selectedOptions.subcountry }/${numberDays}`, {\n        method: \"get\"\n    }).then(res => res.json())\n    .then((data) => {\n      setSelect(true)\n      setWeatherData(data)\n      setSelectedValue(selectedOptions.name);\n    });\n  }\n\n  // Editing number of days involves requerying the weather\n  const editBoth =  (options) => {\n    setNumberDays(options.value)\n    if(city == \"\"){ // checks to see if the city hasn't been set yet\n      return\n    }\n     handleChange(city, options.value)\n    \n  }\n  // Searching through json was absurdly slow so it was converted to a table in the DB and this is querying that\n  const newData =  async (inputValue) => {\n    if (inputValue == \"\"){\n      return\n    }\n    return fetch(`http://127.0.0.1:5900/countries/${inputValue}`)\n    .then(res => res.json())\n    .then(data => data['cities'])\n  }\n\n\n  //dropdown for number of days\n  const days = [\n    {label: \"3 days\", value: 3},\n    {label: \"5 days\", value: 5},\n    {label: \"7 days\", value: 7},\n  ]\n\n  //hooks and variables for the async dropdown component\n  const [inputValue, setValue] = useState('');\n  const [selectedValue, setSelectedValue] = useState(null);\n\n  const handleInputChange = value => {\n    setValue(value);\n  };\n\n  const [token, setToken] = useState(false);\n\n  let [fahrenheit, setFahrenheit] = useState(true); \n    const handleChangeFahrenheit = (event) => {\n        fahrenheit = !fahrenheit\n        setFahrenheit(event.target.checked);\n    };\n\n  /* cookie to ensure inactivity, logs out at inactivity of an hour */\n  let validated = Number(localStorage.getItem('items'))\n  if(validated != null && (Date.now() >= validated + 3600000)){\n    validated = false;\n    localStorage.removeItem('items')\n  }\n  if (!token && !validated){\n    return <Login setToken={setToken} />\n  } \n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n      {select && <FormControlLabel\n        control={<Switch checked={fahrenheit} onChange={handleChangeFahrenheit} />}\n        label=\"F/C\"\n        />}\n        <span>Welcome to Akshay Shivkumar's weather app!\n        <div className=\"select\">\n          <AsyncSelect\n            cacheOptions\n            defaultOptions\n            value={selectedValue}\n            getOptionLabel={(option) => option.name + \", \" +  option.subcountry}\n            getOptionValue={(option) => option.geonameid} // It should be unique value in the options. E.g. ID\n            placeholder = {'Enter a city to find it\\'s weather'}\n            onChange={(city) => handleChange(city, numberDays)}\n            onInputChange = {handleInputChange}\n            loadOptions = {newData}\n          />\n\n          <Select\n            options={days}\n            placeholder = {'Number of days of forecast'}\n            onChange={editBoth}\n          />\n          \n        </div>\n      </span>\n      <Grid container spacing={2} style={gridStyle}>\n            <Grid item xs={6} md={6}>\n              {select && <Forecast forecast={weatherData} fahrenheit= {fahrenheit}/>}\n          </Grid>\n          <div className = {padding}>{select && <SunriseSunset forecast={weatherData} fahrenheit={fahrenheit}/>}</div>\n\n            <Grid item xs = {6} md ={4}>\n              {select && <MultiDayWeatherForecast forecast = {weatherData.forecast} days = {numberDays} fahrenheit= {fahrenheit}/>}\n\n            </Grid>\n        </Grid>\n\n     \n      </header>\n\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}